## Chapter 6 函数

### 函数基础

- 函数：封装了一段代码，可以在一次执行过程中被反复调用；
  - 函数头：
    - 函数名称——标识符，用于后续的调用
    - 形式参数——代表函数的输入参数
    - 返回类型——函数执行完成后所返回的结果类型

  - 函数体
    - 为一个语句块（block），包含了具体的计算逻辑

- 函数声明与定义
  - 函数声明质保函函数头，不包含函数体，通常置于头文件
  - 函数声明可出现多次，但函数定义通常只能出现一次（存在例外）


- 函数调用
  - 需要提供函数名与实际参数
  - 实际参数拷贝初始化形式参数
  - 返回值会被拷贝给函数的调用者
  - 栈帧结构
- 拷贝过程的（强制）省略
  - 返回值优化
  - C++17强制省略拷贝临时对象
- 函数的外部链接

### 函数详解——参数

- 函数可以在函数头的小括号中包含0到多个形参

  - 包含0个形参时，可以使用void标记
  - 对于非模板函数来说，其每一个形参都有确定的类型，但形参可以没有名称
  - 形参名称的变化并不会映入函数的不同版本
  - 实参到形参的拷贝求值顺序不变，C++17强制省略赋值临时对象

- 函数传值、传址、传引用

- 函数传参过程中的类型退化

- 变长参数

  - initializer_list：可以传入变个数的参数

    ```C++
    #include <initializer_list>
    void fun(std::initializer_list<int> par){
    };
    
    fun({1,2,3,4,5})
    fun({1,2,3})
    ```

  - 可边长度模板参数

  - 使用省略号表示形式参数

- 函数可以定义缺省实参

  - 如果某个形参具有缺省实参，那么它右侧的形参都必须具有缺省实参
  - 在一个翻译单元中，每个形参的缺省实参只能定义一次
  - 具有缺省实参的函数调用时，传入的实参会按照从左到右的顺序匹 配形参数
  - 缺省实参为对象时，实参的缺省值会随对象值的变化而变化

- main函数的两个版本

  - 无形参版本`int main(){}`

  - 带两个形参的版本`int main(int argc, char * argv []){}` // 分别表示实参的个数和实参的数值，argv包含`argc+1`个元素，最后一个元素是null

    `nm ./demo`

### 函数详解——函数体

- 函数体形成域

  - 其中包含了自动对象（内部声明的对象以及形参对象）
  - 也可包含局部静态对象

- 函数体执行完成时的返回

  - 隐式返回
  - 显式返回关键字：return
    - return 语句;
    - return 表达式;
    - return 初始化表达式;

  - 小心返回自动帝乡的引用或者指针
  - 返回值的优化（RVO）——C++17对返回临时对象的强制优化

- 















